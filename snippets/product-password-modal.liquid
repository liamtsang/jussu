{% comment %}
  Product Password Modal
  Renders the password protection overlay and modal

  Accepts:
  - product: {Object} Product Liquid object (required)

  Usage:
  {% render 'product-password-modal', product: product %}
{% endcomment %}

{%- assign is_protected = product.metafields.custom.is_password_protected -%}
{%- assign access_password = product.metafields.custom.access_password -%}
{%- assign access_prompt = product.metafields.custom.access_prompt -%}

{%- if is_protected and access_password != blank -%}
  <div 
    class="product-password-overlay" 
    data-product-password-id="{{ product.id }}"
    data-product-password-value="{{ access_password }}"
    data-product-password-prompt="{{ access_prompt }}"
  >
    <div class="product-password-modal">
      <h2>{{ 'products.product.password_protected' | t: default: 'Protected Product' }}</h2>
      
      {%- if access_prompt != blank -%}
        <p>{{ access_prompt }}</p>
      {%- else -%}
        <p>{{ 'products.product.password_prompt' | t: default: 'Please enter the password to access this product.' }}</p>
      {%- endif -%}
      
      <form class="product-password-form">
        <input 
          type="text" 
          class="product-password-input" 
          placeholder="{{ 'products.product.password_placeholder' | t: default: 'Enter password' }}"
          autocomplete="off"
          required
        >
        <button type="submit" class="product-password-submit">
          {{ 'products.product.password_submit' | t: default: 'Unlock' }}
        </button>
        <div class="product-password-error">
          {{ 'products.product.password_error' | t: default: 'Incorrect password. Please try again.' }}
        </div>
      </form>
    </div>
  </div>
{%- endif -%}
